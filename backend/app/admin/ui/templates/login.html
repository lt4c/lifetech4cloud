{% extends "base.html" %}
{% block title %}Admin Login{% endblock %}
{% block content %}
<section>
  <h1>Admin Access</h1>
  {% if user %}
    <p>Signed in as <strong>{{ user.username }}</strong>.</p>
    {% if can_claim %}
      <form method="post" hx-post="login" hx-target="#claim-result" hx-swap="innerHTML">
        <input type="hidden" name="token" value="{{ csrf_token }}">
        <label>
          Bootstrap Secret
          <input type="password" name="secret" required>
        </label>
        <button type="submit">Claim Admin Role</button>
      </form>
      <div id="claim-result"></div>
    {% else %}
      <p>No bootstrap secret configured. Ask an existing admin for access.</p>
    {% endif %}
  {% else %}
    <p>You must sign in via Discord before accessing the admin panel.</p>
    <a class="contrast" href="/auth/discord/login">Sign in with Discord</a>
    {% if can_claim %}
      <p class="secondary">After signing in, return here to claim the admin role using the bootstrap secret.</p>
    {% endif %}
  {% endif %}
</section>
{% endblock %}
