{% extends "base.html" %}
{% block title %}Status{% endblock %}
{% block content %}
<section>
  <h1>System Health</h1>
  <ul>
    <li>API: {{ 'UP' if health.api_up else 'DOWN' }}</li>
    <li>Version: {{ health.version or 'n/a' }}</li>
    <li>Build Time: {{ health.build_time or 'n/a' }}</li>
  </ul>
</section>

<section class="grid">
  <article>
    <h2>Dependencies</h2>
    <ul>
      <li>Database ping: {{ deps.db_ping_ms or 'n/a' }} ms</li>
      <li>Redis ping: {{ deps.redis_ping_ms or 'n/a' }} ms</li>
      <li>Disk free: {{ deps.disk_free_mb or 'n/a' }} MB</li>
      <li>CPU usage: {{ deps.cpu_percent or 'n/a' }}%</li>
      <li>Memory usage: {{ deps.memory_percent or 'n/a' }}%</li>
    </ul>
  </article>
  <article>
    <h2>Database</h2>
    <ul>
      <li>Version: {{ db_status.version or 'n/a' }}</li>
      <li>Active connections: {{ db_status.active_connections or 'n/a' }}</li>
      <li>Last migration: {{ db_status.last_migration or 'n/a' }}</li>
    </ul>
    <h3>Slow Queries</h3>
    <ul>
      {% for query in db_status.slow_queries %}
        <li><pre>{{ query.query }}</pre><small>{{ query.duration_ms }} ms</small></li>
      {% else %}
        <li class="muted">No slow queries detected.</li>
      {% endfor %}
    </ul>
  </article>
</section>
{% endblock %}
